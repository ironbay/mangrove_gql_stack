query Todos {
  session {
    currentUser {
      todos {
        id
        title
      }
    }
  }
}

mutation RemoveTodo($id: String!) {
  removeTodo(id: $id) {
    id
    title
  }
}

mutation CreateTodo($id: String!, $title: String!) {
  createTodo(input: { id: $id, title: $title }) {
    id
    title
  }
}

mutation Upload($name: String!, $type: String!) {
  upload(name: $name, type: $type)
}

query Pipes {
  session {
    currentUser {
      pipes {
        flags {
          enabled
        }
        sources {
          account {
            name
            category
            subcategory
          }
          filters {
            name
            op
            ... on NumberFilter {
              num
            }
            ... on TextFilter {
              text
            }
          }
        }
        destinations {
          name
          topic
        }
      }
    }
  }
}

mutation CreatePipe($input: CreatePipeInput!) {
  createPipe(input: $input) {
    id
    name
  }
}

query Connections {
  session {
    currentUser {
      connections {
        id
        kind
        ... on PlaidConnection {
          institution
          accounts {
            id
            name
            category
            subcategory
          }
        }
        ... on SlackConnection {
          name
          channels {
            id
            name
            topic
            num_members
          }
        }
      }
    }
  }
}

mutation PlaidStart($input: PlaidStartInput!) {
  plaidStart(input: $input) {
    link_token
    state
  }
}

mutation PlaidFinish($input: PlaidFinishInput!) {
  plaidFinish(input: $input) {
    item_id
  }
}

mutation RemovePlaid($input: RemovePlaidInput!) {
  removePlaid(input: $input) {
    id
    user_id
  }
}

mutation CreateSlackStart($input: CreateSlackStartInput!) {
  createSlackStart(input: $input) {
    url
  }
}
